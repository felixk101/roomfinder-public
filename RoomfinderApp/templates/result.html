{% load static %}

<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>RoomFinder</title>
    <link rel="stylesheet" type="text/css" href="{% static "style.css" %}">
</head>
<body>
    <header>
      <p> HSA Logo hier... </p>
      <h1 class="mainLine">RoomFinder</h1>
    </header>
    {% for building in buildings %}
        <h2>Gebäude {{ building }}</h2>
        {% for floor in floors %}
            <h3>{% if floor == 0 %}Untergeschoss{% endif %}</h3>
            <h3>{% if floor == 1 %}Erdgeschoss{% endif %}</h3>
            <h3>{% if floor == 2 %}Erster Stock{% endif %}</h3>
            <h3>{% if floor == 3 %}Zweiter Stock{% endif %}</h3>
            <h3>{% if floor == 4 %}Dritter Stock{% endif %}</h3>
            <h3>{% if floor == 5 %}Vierter Stock{% endif %}</h3>
            <h3>{% if floor == 6 %}Fünfter Stock{% endif %}</h3>
            <h3>{% if floor == 7 %}Sechster Stock{% endif %}</h3>
            <object id="{{ building }}{{ floor }}" data="{% static 'roomplans/' %}{{ building }}{{ floor }}.svg"
                    type="image/svg+xml"></object>
        {% endfor %}
    {% endfor %}



    <script>
    (function() {
        var roomData = JSON.parse('{{ json_data|safe }}');
        for (var room in roomData) {
            var roomGraphic = document.getElementById(roomData[room].name);
            if (roomGraphic == undefined) {
                console.log("couldn't find an element with id "+roomData[room].name);
                continue;
            }
            if (roomData[room]["free"]) {
                roomGraphic.setAttribute("fill","green");
                console.log(roomData[room].name+" sollte jetzt gruen sein");
            } else {
                roomGraphic.setAttribute("fill","red");
                console.log(roomData[room].name+" sollte jetzt rot sein");
            }
        }
    })();
    </script>
</body>
</html>